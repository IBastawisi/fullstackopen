(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{38:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var c=t(0),u=t(1),a=t.n(u),r=t(15),s=t.n(r),i=t(5),o=t(4),d=t(3),l=t.n(d),j=function(e){var n=e.contacts,t=e.handleDelete;return Object(c.jsx)("div",{children:n.map((function(e){return Object(c.jsxs)("div",{children:[Object(c.jsxs)("span",{children:[e.name,": ",e.number]}),Object(c.jsx)("button",{onClick:function(){return t(e)},children:"DELETE"})]},e.id)}))})},b=function(e){var n=e.addContact,t=e.newName,u=e.handleNameInput,a=e.newNumber,r=e.handleNumberInput;return Object(c.jsxs)("form",{onSubmit:n,children:[Object(c.jsxs)("div",{children:["Name: ",Object(c.jsx)("input",{value:t,onInput:u})]}),Object(c.jsxs)("div",{children:["Number: ",Object(c.jsx)("input",{value:a,onInput:r})]}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{type:"submit",children:"Add"})})]})},f=function(e){var n=e.searchQuery,t=e.setSearchQuery;return Object(c.jsxs)("div",{children:[Object(c.jsx)("span",{children:"Search Contacts"}),Object(c.jsx)("input",{type:"search",value:n,onInput:function(e){return t(e.target.value)}})]})},h="/api/contacts",m=function(){return l.a.get(h).then((function(e){return e.data}))},O=function(e){return l.a.post(h,e).then((function(e){return e.data}))},p=function(e,n){return l.a.put("".concat(h,"/").concat(e),n).then((function(e){return e.data}))},x=function(e){return l.a.delete("".concat(h,"/").concat(e)).then((function(e){return e.data}))},v=function(e){var n=e.announcement;return n?Object(c.jsx)("div",{className:"announcement ".concat(n.style),children:n.message}):null},w=function(){var e=Object(u.useState)([]),n=Object(o.a)(e,2),t=n[0],a=n[1],r=Object(u.useState)(""),s=Object(o.a)(r,2),d=s[0],l=s[1],h=Object(u.useState)(""),w=Object(o.a)(h,2),y=w[0],N=w[1],g=Object(u.useState)(""),S=Object(o.a)(g,2),I=S[0],k=S[1],C=Object(u.useState)(null),D=Object(o.a)(C,2),E=D[0],T=D[1];Object(u.useEffect)((function(){m().then((function(e){return a(e)}))}),[]);var Q=I.trim().length>0?t.filter((function(e){return e.name.toLowerCase().includes(I.toLowerCase())})):t;return Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Phonebook"}),Object(c.jsx)(v,Object(i.a)({},{announcement:E})),Object(c.jsx)(f,Object(i.a)({},{searchQuery:I,setSearchQuery:k})),Object(c.jsx)("h3",{children:"Add New"}),Object(c.jsx)(b,Object(i.a)({},{addContact:function(e){e.preventDefault();var n=t.find((function(e){return e.name===d})),c={name:d,number:y};n?window.confirm("".concat(c.name," is already in the phonebook, update his number?"))&&p(n.id,c).then((function(e){T({message:"".concat(c.name," was successfully updated"),style:"success"}),setTimeout((function(){T(null)}),3e3),a(t.map((function(n){return n.id===e.id?e:n}))),l(""),N("")})):O(c).then((function(e){T({message:"".concat(c.name," was successfully added"),style:"success"}),setTimeout((function(){T(null)}),3e3),a(t.concat(e)),l(""),N("")}))},newName:d,handleNameInput:function(e){l(e.target.value)},newNumber:y,handleNumberInput:function(e){N(e.target.value)}})),Object(c.jsx)("h3",{children:"Numbers"}),Object(c.jsx)(j,{contacts:Q,handleDelete:function(e){window.confirm("Delete ".concat(e.name,"?"))&&x(e.id).then((function(){T({message:"".concat(e.name," was successfully deleted"),style:"success"}),setTimeout((function(){T(null)}),3e3),a(t.filter((function(n){return n.id!=e.id})))})).catch((function(){T({message:"".concat(e.name," was already deleted from server"),style:"error"}),setTimeout((function(){T(null)}),3e3),a(t.filter((function(n){return n.id!=e.id})))}))}})]})};t(38);s.a.render(Object(c.jsx)(a.a.StrictMode,{children:Object(c.jsx)(w,{})}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.38f5b466.chunk.js.map